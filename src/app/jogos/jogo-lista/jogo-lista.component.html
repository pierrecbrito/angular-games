<div class="container">

    <!-- Botão para adicionar jogo -->
    <div class="controls">
        <button mat-raised-button color="primary" (click)="mostrarOuCancelarFormulario()">
            {{ exibirFormulario ? 'Cancelar' : 'Adicionar Jogo' }}
        </button>
    </div>
    <!-- Formulário de adição de jogos -->
    <mat-card appearance="outlined" *ngIf="exibirFormulario" style="padding: 14px;">
        <mat-card-header>
          <mat-card-title>{{ jogoEditando ? 'Editar Jogo' : 'Adicionar Jogo' }}</mat-card-title>
        </mat-card-header>
        <mat-card-content class="formulario-adicao">
            <mat-form-field appearance="fill" style="min-width: 250px;">
                <mat-label>Título</mat-label>
                <input matInput [(ngModel)]="novoJogo.titulo" placeholder="Título do jogo" />
            </mat-form-field>
    
            <mat-form-field appearance="fill" style="max-width: 160px;">
                <mat-label>Gênero</mat-label>
                <input matInput [(ngModel)]="novoJogo.genero" placeholder="Gênero do jogo" />
            </mat-form-field>
    
            <mat-form-field appearance="fill" style="max-width: 160px;">
                <mat-label>Plataforma</mat-label>
                <input matInput [(ngModel)]="novoJogo.plataforma" placeholder="Plataforma" />
            </mat-form-field>
    
            <mat-form-field appearance="fill" style="max-width: 180px;">
                <mat-label>Data de Lançamento</mat-label>
                <input matInput [(ngModel)]="novoJogo.dataLancamento" [matDatepicker]="picker" placeholder="Data de Lançamento" />
                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
    
            <mat-form-field appearance="fill" style="min-width: 400px;">
                <mat-label>URL da Capa</mat-label>
                <input matInput [(ngModel)]="novoJogo.capa" placeholder="URL da capa" />
            </mat-form-field>  
        </mat-card-content>
        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="adicionarOuSalvarJogo()">
                {{ jogoEditando ? 'Salvar Alterações' : 'Adicionar Jogo' }}
            </button>
        </mat-card-actions>
      </mat-card>
      

    <!-- Campo de busca -->
    <mat-form-field appearance="fill" style="margin-top: 10px; min-width: 400px;">
        <mat-label>Buscar Jogos</mat-label>
        <input matInput [(ngModel)]="searchTerm" placeholder="Pesquisar por título, gênero, plataforma ou data" (input)="buscarJogos()" />
        <button matSuffix mat-icon-button *ngIf="searchTerm" (click)="resetarPesquisa()">
            <mat-icon>close</mat-icon>
        </button>
    </mat-form-field>

    <!-- Tabela de jogos -->
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" matSort>
        <ng-container matColumnDef="capa">
            <th mat-header-cell *matHeaderCellDef>Capa</th>
            <td mat-cell *matCellDef="let jogo">
                <img [src]="jogo.capa" alt="Capa do jogo" style="width: 60px; height: auto;" />
            </td>
        </ng-container>

        <ng-container matColumnDef="titulo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header id="header-titulo">Título</th>
            <td mat-cell *matCellDef="let jogo">{{ jogo.titulo }}</td>
        </ng-container>

        <ng-container matColumnDef="genero">
            <th mat-header-cell *matHeaderCellDef>Gênero</th>
            <td mat-cell *matCellDef="let jogo">{{ jogo.genero }}</td>
        </ng-container>

        <ng-container matColumnDef="plataforma">
            <th mat-header-cell *matHeaderCellDef>Plataforma</th>
            <td mat-cell *matCellDef="let jogo">{{ jogo.plataforma }}</td>
        </ng-container>

        <ng-container matColumnDef="dataLancamento" id="header-data">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Data de Lançamento</th>
            <td mat-cell *matCellDef="let jogo">{{ jogo.dataLancamento | date:'dd/MM/yyyy' }}</td>
        </ng-container>

        <ng-container matColumnDef="acoes">
            <th mat-header-cell *matHeaderCellDef>Ações</th>
            <td mat-cell *matCellDef="let jogo" class="celula-acoes">
                <button mat-icon-button color="accent" (click)="editarJogo(jogo)">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="warn" (click)="removerJogo(jogo)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns; trackBy: trackById"></tr>
    </table>
    <mat-paginator [pageSizeOptions]="pageSizeOptions"
               [pageSize]="pageSize"
               showFirstLastButtons
               aria-label="Selecione a página"
               (page)="onPageChange($event)">
    </mat-paginator>
</div>
  